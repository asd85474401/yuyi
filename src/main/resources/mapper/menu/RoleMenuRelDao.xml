<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kcidea.erms.dao.menu.RoleMenuRelDao">
    <delete id="deleteByRoleId">
        DELETE FROM role_menu_rel
        WHERE role_id = #{roleId}
    </delete>

    <select id="findMenuModelListByRoleId" resultType="com.kcidea.erms.model.menu.MenuModel">
        SELECT
            m.id,m.name,m.model_name,m.parent_id,m.LEVEL,m.path,
            rel.show_flag,rel.select_flag,rel.insert_flag,rel.update_flag,
            rel.delete_flag,rel.import_flag,rel.export_flag,rel.other_flag
        FROM role_menu_rel rel
        LEFT JOIN menu m ON rel.menu_id = m.id
        WHERE rel.role_id = #{roleId}
        order by m.id asc
    </select>

</mapper>
